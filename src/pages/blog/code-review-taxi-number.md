---
title: å¦‚æœå¤ªèªçœŸå» Code Review æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ
date: 2023/05/31
tags:
  - JavaScript
---

## å‰è¨€

Code Review å¯¦åœ¨æ˜¯å¤ªé‡è¦äº†ï¼Œæˆ‘æƒ³æ²’äººæœƒå¦èªã€‚

åœ¨è»Ÿé«”é–‹ç™¼çš„ä¸–ç•Œä¸­ï¼Œéœ€æ±‚ä¸æ–·åœ°è®ŠåŒ–æ˜¯å®¶å¸¸ä¾¿é£¯ï¼Œç¨‹å¼ç¢¼çš„å¯è®€æ€§å’Œå¯ç¶­è­·æ€§é¡¯å¾—æ ¼å¤–é‡è¦ã€‚ç„¶è€Œ Code Review è¦çœ‹çš„å¤šæ·±ã€å¤šä»”ç´°ã€èŠ±å¤šå°‘æ™‚é–“çœ‹ï¼Œæƒ³æ‰¾åˆ°é©ç•¶çš„å¹³è¡¡é»ï¼Œå…¶ä¸­åˆ†å¯¸çš„æ‹¿æç¢ºå¯¦æ˜¯å€‹æŒ‘æˆ°ã€‚

ä½†æˆ‘å§‹çµ‚èªç‚ºæœ‰ç¸½æ¯”æ²’æœ‰å¥½ï¼Œç•¢ç«Ÿ Code Review  æ˜¯ç¶­æŒç¨‹å¼ç¢¼å“è³ªæœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚ç›¸ä¿¡å¤§éƒ¨åˆ†é–‹ç™¼è€…éƒ½æœ‰åŒæ„Ÿï¼š **ã€Œä¸æ˜¯æ–°éœ€æ±‚é›£å¯¦ç¾ï¼Œè€Œæ˜¯èˆŠçš„æ‰£æ”¹ä¸å‹•ã€‚ã€** æœ‰å¤šå°‘äººæ›¾è¢«å›°åœ¨éºç•™ä»£ç¢¼ä¹‹ä¸­ï¼Œç‚ºäº†åŠ ä¸€å€‹æ–°åŠŸèƒ½ï¼Œé¦–å…ˆå¾—è€—è²»ç„¡æ•¸çš„ç²¾åŠ›ï¼Œè©¦åœ–ç†è§£é‚£äº›åˆé•·åˆå†—ã€è®Šæ•¸èƒ¡äº‚å‘½åçš„ç¨‹å¼ç¢¼ã€‚æ¥è‘—æ‰ç™¼ç¾å‡½å¼å’Œå‡½å¼ä¹‹é–“è€¦åˆçš„åš´é‡ï¼Œæƒ³è¦é‡æ§‹åˆå› ç‚ºå‰¯ä½œç”¨å¤ªå¤šè€Œä¸æ•¢è¼•èˆ‰å¦„å‹•ã€‚

å› æ­¤åœ¨é€™ç¯‡æ–‡ç« ä¸­æˆ‘æƒ³æ¨¡æ“¬é€™æ¨£ä¸€å€‹æƒ…å¢ƒï¼š

> å¦‚æœå¾ˆåš´æ ¼åœ°é€²è¡Œ Code Reviewï¼Œæœ€å¹æ¯›æ±‚ç–µçš„é‚£ç¨®ï¼Œé‚£çœ‹èµ·ä¾†æœƒåƒä»€éº¼æ¨£å­ï¼Ÿ

æˆ‘å°‡ä»¥å„ç¨®å£å‘³é“çš„è§’åº¦ï¼Œåˆ†æä¸€æ®µå‡ºç¾åœ¨çœŸå¯¦å ´æ™¯çš„ç¨‹å¼ç¢¼ï¼Œæä¾›ä¿®æ”¹å»ºè­°ã€‚åŒæ™‚ä¹Ÿåˆ†äº«å¯å¥—ç”¨çš„å°æ‡‰ ESLint è¦å‰‡ï¼Œå…¶å®˜æ–¹æ–‡ä»¶ä¹Ÿæœƒè§£é‡‹é€™æ¢è¦å‰‡å­˜åœ¨çš„ç†ç”±æ˜¯ä»€éº¼ã€‚

### Review åŸå‰‡

1. ç¨‹å¼ç¢¼æ‡‰å…·å¯è®€æ€§
2. ä»¥ç›¡é‡å°‘çš„ç¨‹å¼ç¢¼å¯¦ç¾ç›¸åŒçš„åŠŸèƒ½
3. é¿å…æ½›åœ¨å‰¯ä½œç”¨å’Œå£å‘³é“

## éœ€æ±‚æè¿°

1. å‡½å¼æ¥å—ä»»æ„å­—ä¸²ï¼Œè½‰æ›æˆç”¨ä¾†è¡¨ç¤ºã€Œè¨ˆç¨‹è»Šçš„æ•¸é‡ã€çš„æ•¸å­—å­—ä¸²ï¼Œä»‹æ–¼ `0` è‡³ `30`
2. å°æ–¼ `0` æ™‚æ‡‰ç¸½æ˜¯å¾—åˆ° `0`ï¼›å¤§æ–¼ `30` æ™‚ç¸½æ˜¯æ‡‰å¾—åˆ° `30`
3. ç„¡æ³•ç”¨ `parseInt` è§£æçš„å­—ä¸²ä¸€å¾‹è½‰æ›æˆ `0`
4. è½‰æ›å¾Œçš„å­—ä¸²ä¸è¶³å…©ä½æ•¸æ™‚ï¼Œå·¦é‚Šè£œä¸Š `0`

## åŸç¨‹å¼ç¢¼ç‰‡æ®µ

> é€™ 13 è¡Œä»£ç¢¼åŒ…æ‹¬è¨»è§£ä¸€å­—ä¸å·®åœ°æ“·è‡ªçœŸå¯¦å°ˆæ¡ˆï¼Œå…¶ä¸­çš„äººåå·²æ›¿æ›æˆå‡å

```javascript
// 2021-11-23 Sean : è½‰å‹ > è£œ0
const TaxiNumber = (v) => {
  // æ­£è¦è¡¨ç¤º
  let regex = new RegExp(/^\d{1,3}$/);
  // å«è»Šæœ€å°å€¼ã€æœ€å¤§å€¼
  let minTaxi = 0, maxTaxi = 30;
  // è½‰å‹ï¼Œåˆ©ç”¨è½‰å‹èˆ‡è¼¸å…¥ç‰¹æ€§ï¼Œè™•è£¡æ•¸å­—å¾Œå­—ä¸²
  v = parseInt(v);
  // å­—ä¸²åˆ¤æ–·ï¼Ÿæ•¸å€¼åˆ¤æ–·
  v = regex.test(v.toString()) ? v < minTaxi ? minTaxi : v > maxTaxi ? maxTaxi : v : minTaxi;
  // å›å‚³ & è£œ0
  return v.toString().padStart(2, '0');
}
```

## å£å‘³é“ä¸€ï¼šæ„åœ–ä¸æ˜çš„å‡½å¼å‘½å

```javascript
const TaxiNumber = (v) => {
      ^^^^^^^^^^
```

æˆ‘é¦–å…ˆæ³¨æ„åˆ° `TaxiNumber` é€™å€‹å–®è©æ˜¯å¤§é§å³°ï¼Œç•¶è®€è€…å–®ç¨çœ‹æ™‚å¾ˆå®¹æ˜“ç”¢ç”Ÿå›°æƒ‘ï¼šå®ƒæ˜¯ç”¨ä¾†å±•ç¤ºè¨ˆç¨‹è»Šæ•¸å­—çš„ React Component å—ï¼Ÿåˆæˆ–æ˜¯ *class*ï¼Ÿä½†éƒ½ä¸æ˜¯ï¼Œå®ƒåªæ˜¯ç”¨ä¾†è½‰æ›å­—ä¸²çš„å‡½å¼ã€‚

å‡½å¼é€šå¸¸æ˜¯ä»¥å‹•è©é–‹é ­ï¼Œè€Œä¸”æ‡‰å‘½åå¾—æ¸…æ™°æ˜ç­ï¼Œèƒ½å¤ è¡¨é”å…¶åŠŸèƒ½æˆ–æ“ä½œç›®çš„ã€‚

é€™é¡å‡½å¼å»ºè­°ä»¥ `convert`ã€`parse`ã€`format`ã€`normalize` ç­‰å‹•è©é–‹é ­ï¼Œä¾‹å¦‚ `convertAToB`ï¼Œä¸”æŒ‰ç…§ JavaScript æ…£ä¾‹é€šå¸¸æœƒä»¥å°é§å³°å‘½åã€‚

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`camelcase`](https://eslint.org/docs/rules/camelcase) å¯ç´„æŸä¸€è‡´è®Šæ•¸çš„å‘½åé¢¨æ ¼ã€‚

## å£å‘³é“äºŒï¼šç¸®å¯«çš„åƒæ•¸

```javascript
const TaxiNumber = (v) => {
                    ^
```

`v` å¯èƒ½æ˜¯ `value` çš„ç¸®å¯«ï¼Œéš¨å€‹äººå–œå¥½ç•¥ç¸®å–®è©æ˜¯å€‹å¸¸è¦‹çš„å£å‘³é“ï¼Œé€šå¸¸åªæœ‰ä½œè€…æœ¬äººæ‰çŸ¥é“å…¶èƒŒå¾Œçš„å«ç¾©ã€‚ä½†è¦çŸ¥é“èº«ç‚ºåœ˜éšŠçš„ä¸€å“¡ï¼Œè‡ªå·±ä¸æœƒæ˜¯å”¯ä¸€ç¶­è­·é€™æ®µç¨‹å¼ç¢¼çš„äººã€‚å‘½åå‰å¤šèŠ±å€‹å¹¾ç§’ä»”ç´°æ€è€ƒï¼Œå°‡å¿ƒæ¯”å¿ƒåœ°ç‚ºä¸‹ä¸€å€‹æ¥æ‰‹çš„äººï¼Œç”šè‡³æ˜¯ä¸€å€‹æœˆå¾Œçš„è‡ªå·±è‘—æƒ³ï¼Œç¢ºä¿å®ƒæ¸…æ™°æ˜“æ‡‚ï¼Œä»»ä½•äººçœ‹äº†éƒ½èƒ½å¤ é¦¬ä¸Šç†è§£ã€‚

å»ºè­°æ›¿æ›æˆ `countString` ï¼Œæˆ–æ˜¯ä»»æ„ä¸€å…·æè¿°æ€§å–®è©ã€‚

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`id-denylist`](https://eslint.org/docs/rules/id-denylist) å¯ä»¥å®šç¾©ã€Œç¦è©ã€ï¼Œç¦æ­¢ä½¿ç”¨é€™äº›å–®è©ä¾†å‘½åï¼Œä¾‹å¦‚å–®å­—æ¯ `a` `b` `c`ï¼Œæˆ–æ˜¯æ¯«ç„¡æ„ç¾©çš„ `data`ã€`value`ã€‚

## å£å‘³é“ä¸‰ï¼šå†—ä½™çš„å»ºæ§‹å¼

```javascript
  let regex = new RegExp(/^\d{1,3}$/);
              ^^^^^^^^^^
```

åœ¨é€™å€‹æƒ…å¢ƒä¸¦æ²’æ‰“ç®—ä»¥ [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals) ä¾†å‹•æ…‹ç”¢ç”Ÿ patternï¼Œä¾‹å¦‚ ``new RegExp(`^{${a}}$`)``ï¼Œæ‰€ä»¥å¯ç›´æ¥çœç•¥æ‰ `new RegExp()`ï¼Œç›´æ¥å¯«æˆæ›´ç°¡çŸ­çš„ `/^\d{1,3}$/` å³å¯ã€‚

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`prefer-regex-literals`](https://eslint.org/docs/rules/prefer-regex-literals) ä¾†åå¥½æ¡ç”¨ regular expression literals å¯«æ³•ã€‚

ç•¶èƒ½ç”¨æ›´ç°¡æ½”çš„å¯«æ³•é”æˆä¸€æ¨¡ä¸€æ¨£çš„æ•ˆæœæ™‚ï¼Œå°±æ²’ç†ç”±é¸æ“‡å†—é•·çš„é‚£å€‹ã€‚å…¶ä»–é¡ä¼¼çš„å†—ä½™çš„å»ºæ§‹å¼é‚„æœ‰é€™äº›ï¼š

- å¯« `{}` ï¼Œè€Œé `new Object()`
- å¯« `[]` ï¼Œè€Œé `new Array()`

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`no-new-object`](https://eslint.org/docs/rules/no-new-object) å’Œ [`no-array-constructor`](https://eslint.org/docs/rules/no-array-constructor) ä¾†åå¥½æ¡ç”¨ literal notation å¯«æ³•ã€‚


## å£å‘³é“å››ï¼šå¾æœªæ”¹è®Šçš„ `let`

```javascript
  let minTaxi = 0, maxTaxi = 30;
  ^^^
```
ä¸€å€‹ç°¡å–®çš„åŸå‰‡æ˜¯æ°¸é å„ªå…ˆä½¿ç”¨ `const` ä¾†å®£å‘Šè®Šæ•¸ï¼Œé™¤éçœŸçš„æœ‰éœ€è¦é‡æ–°è³¦å€¼ã€‚å› æ­¤å»ºè­°æ”¹å¯«æˆï¼š

```javascript
/* å¸¸è¦‹é¢¨æ ¼ */
const min = 0, max = 30

/* é™£åˆ—è§£æ§‹é¢¨æ ¼ */
const [min, max] = [0, 30]
```

é †å¸¶ä¸€æï¼Œ `[number, number]` çš„å¯«æ³•åœ¨ TypeScript ä¸­ç¨±ä½œ [tuple](https://www.typescriptlang.org/docs/handbook/2/objects.html#tuple-types)ï¼Œåœ¨é€™éš±å«ä¸€ç¨®æˆé›™æˆå°çš„æ¦‚å¿µï¼Œæœ‰åŠ©æ–¼è®€è€…æŠŠå®ƒå€‘ç†è§£æˆæ˜¯ã€Œä¸€çµ„ç¯„åœã€çš„æ•¸å­—ã€‚

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`prefer-const`](https://eslint.org/docs/rules/prefer-const) æª¢æŸ¥å¾æœªè¢«é‡æ–°è³¦å€¼çš„è®Šæ•¸ã€‚æ”¯æ´ auto fixï¼Œå¯ä»¥è‡ªå‹•å°‡ `let` æ›¿æ›æˆ `const`ã€‚

## å£å‘³é“äº”ï¼šå°åƒæ•¸é‡æ–°è³¦å€¼

```javascript
  v = parseInt(v);
    ^
```

ç„¡è«–ä»»ä½•èªè¨€ï¼Œ**è¤‡å¯«å‡½å¼çš„åƒæ•¸**å¾ä¾†ä¸æ˜¯å€‹å¥½ä¸»æ„ï¼Œå¯åƒè€ƒä¸€äº›[é‡å° reassign parameter çš„è¨è«–](https://www.google.com/search?q=reassign+parameter)ã€‚å› ç‚ºé€™å¾ˆå®¹æ˜“èª¤å°è®€è€…ï¼ŒåŸæœ¬é æœŸå‚³å…¥çš„åƒæ•¸æ˜¯ stringï¼Œä½†çªç„¶åœ¨æŸä¸€è¡Œå¾Œå»ç¡¬ç”Ÿç”Ÿè®Šæˆäº† numberã€‚

è‹¥å°ˆæ¡ˆæœ‰å°å…¥ TypeScriptï¼ŒæŸç¨®ç¨‹åº¦ä¹Ÿå¯ä»¥é¿å…å‡ºç¾é€™ç¨®å¯«æ³•ï¼Œä¾‹å¦‚åœ¨æ­¤ä¾‹ä¸­ï¼Œå› ç‚ºæ–°å€¼é¡¯ç„¶ä¸ç¬¦åˆåƒæ•¸åŸæœ¬çš„å‹åˆ¥ï¼Œcompiler ä¾¿æœƒç›´æ¥å ±éŒ¯ã€‚

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`no-param-reassign`](https://eslint.org/docs/rules/no-param-reassign) ä¾†é˜²æ­¢åƒæ•¸è¢« reassignã€‚

## å£å‘³é“å…­ï¼šå†—é•·çš„ä¸‰å…ƒé‹ç®—å­

```javascript
  v = regex.test(v.toString()) ? v < minTaxi ? minTaxi : v > maxTaxi ? maxTaxi : v : minTaxi;
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
```

å·¢ç‹€çš„ä¸‰å…ƒé‹ç®—å­ï¼Œå¤šå€‹ `:` èˆ‡ `?` äº¤éŒ¯ï¼Œæ²’æœ‰æ›è¡Œèˆ‡ç¸®æ’ï¼Œç¼ºä¹å¯è®€æ€§ã€‚

å»ºè­°æ¡ç”¨å…·æœ‰æ›´æ˜ç¢ºçš„èªæ„çš„ `Math.min()` å’Œ `Math.max()` æ–¹æ³•æ”¹å¯«ï¼Œä¸¦åŠ ä¸Šé©ç•¶çš„æ›è¡Œå’Œç¸®æ’ã€‚
```javascript
  v = regex.test(v.toString())
    ? Math.min(Math.max(v, minTaxi), maxTaxi)
    : minTaxi
```

> ğŸ’¡ å¥—ç”¨ ESLint è¦å‰‡ [`no-nested-ternary`](https://eslint.org/docs/rules/no-nested-ternary) ä¾†ç¦æ­¢å·¢ç‹€çš„ä¸‰å…ƒé‹ç®—å­ã€‚


## å£å‘³é“ä¸ƒï¼šæ·±å…¥è®Šæ•¸çš„å‘½åè—è¡“

### `TaxiNumber`

`number` ä¸€è©ä½œç‚ºè®Šæ•¸æœ‰é»å¤ªç± çµ±äº†ï¼Œä¹Ÿæ²’æœ‰å¥½å¥½åœ°èµ·åˆ°æè¿°çš„ä½œç”¨ï¼Œèªªåˆ°åº•ä»»ä½•åªè¦æ˜¯æ•¸å€¼çš„è®Šæ•¸æƒ³å¿…éƒ½æ˜¯å€‹ numberã€‚ã€Œå¯¬åº¦ widthã€æ˜¯å€‹ numberï¼Œã€Œè§’åº¦ degreeã€ä¹Ÿå¯ä»¥æ˜¯å€‹ numberï¼Œã€Œåƒ¹æ ¼ priceã€æ›´å¯ä»¥æ˜¯å€‹ numberã€‚

è¦æè¿°é€™é¡è®Šæ•¸ï¼Œç›¸ä¿¡çµ•å°æ‰¾å¾—åˆ°æ¯” `number` é‚„æ›´è²¼åˆ‡çš„å–®è©ã€‚

æ ¹æ“šéœ€æ±‚å®ƒæ˜¯ç”¨ä¾†è¡¨ç¤ºã€Œè¨ˆç¨‹è»Šçš„æ•¸é‡ã€ï¼Œå°æ–¼é€™é¡**è¨ˆæ•¸/ç´¯åŠ **çš„è®Šæ•¸ï¼Œå»ºè­°å¯å‘½åæˆ `count` ã€‚

### `minTaxi`

ç¬¬ä¸€çœ¼è¦‹åˆ° `minTaxi` å’Œ `maxTaxi` ï¼Œæœ‰é»é›£æƒ³åƒå…¶èƒŒå¾Œçš„å«ç¾©æ˜¯ä»€éº¼ã€‚è®€è€…å¯èƒ½æœƒæŠŠä»–èª¤è§£æˆè»Šå‹çš„å¤§å°ï¼Œæˆ–æ˜¯è¨ˆç¨‹è»Šçš„è¼‰å®¢æ•¸ã€‚

åœ¨é€™å€‹æƒ…æ³å»ºè­°å–®ç´”å‘½åæˆ `min` å°±è¡Œï¼ŒæŠŠ `taxi` ç•¶ä½œå¾Œç¶´åè€Œä¸é©åˆï¼Œå› ç‚ºå¯¦éš›ä¸Šè¦æè¿°çš„æ˜¯è¨ˆç¨‹è»Šçš„ã€Œæ•¸é‡ã€è€Œéã€Œè¨ˆç¨‹è»Šæœ¬èº«ã€ã€‚è‹¥æƒ³æ›´ç²¾æº–çš„æè¿°ï¼Œå¯ä»¥è€ƒæ…®ç”¨ `minCount` æˆ– `minTaxiCount`ã€‚


## å£å‘³é“å…«ï¼šã€Œ`// é½Šå¤©å¤§è–ï¼Œåˆ°æ­¤ä¸€éŠ`ã€

```javascript
// 2021-11-23 Sean : è½‰å‹ > è£œ0
```

åœ¨æœªå°å…¥ç‰ˆæ§çš„éºç•™å°ˆæ¡ˆä¸­ï¼Œå¸¸è¦‹åœ¨è¨»è§£è£¡å‡ºç¾ä½œè€…çš„å¤§åã€‚ä½†åœ¨ç¾ä»£è»Ÿé«”å°ˆæ¡ˆçš„æƒ³å¿…éƒ½å·²å°å…¥ gitï¼Œé€é git blame å°±èƒ½è¿½æº¯æ¯ä¸€è¡Œçš„ä¿®æ”¹è€…æ˜¯èª°ï¼Œä½•æ™‚ä¿®æ”¹çš„ï¼Œä»¥åŠå°æ‡‰çš„ commit message ç­‰ã€‚

```javascript
  // æ­£è¦è¡¨ç¤º
  // å«è»Šæœ€å°å€¼ã€æœ€å¤§å€¼
  // è½‰å‹ï¼Œåˆ©ç”¨è½‰å‹èˆ‡è¼¸å…¥ç‰¹æ€§ï¼Œè™•è£¡æ•¸å­—å¾Œå­—ä¸²
  // å­—ä¸²åˆ¤æ–·ï¼Ÿæ•¸å€¼åˆ¤æ–·
  // å›å‚³ & è£œ0
```

äº‹å¯¦ä¸Šï¼Œä¸åªç¬¬ä¸€è¡Œçš„è¨»è§£ï¼Œé€™æ•´æ®µå‡ºç¾çš„æ‰€æœ‰çš„è¨»è§£éƒ½æ˜¯å¤šé¤˜çš„ï¼Œå› ç‚ºç¨‹å¼ç¢¼åšçš„äº‹å¤ªé¡¯è€Œæ˜“è¦‹äº†ï¼Œè¨»è§£åè€Œè®Šæˆé–±è®€æ™‚çš„é›œè¨Šã€‚å–„ç”¨èƒ½å¤ è‡ªæˆ‘æè¿°çš„è®Šæ•¸å’Œå‡½å¼å‘½åæ˜¯æœ€å¥½çš„æ–¹æ³•ï¼Œå› ç‚ºå®ƒå€‘æœ¬èº«å°±èƒ½å¤ æ¸…æ¥šåœ°å‚³é”ä»£ç¢¼çš„æ„åœ–ï¼Œä¸å†éœ€è¦é¡å¤–çš„è¨»è§£ã€‚

![code comment be like](../../assets/img/post/code-review-taxi-number/code-comments-be-like.jpg)

## æœ€çµ‚é‡æ§‹çµæœ

ç¶“éåˆ†æä¸é›£ç™¼ç¾é€™å€‹å‡½å¼æ²’å¿…è¦ç”¨ä¸Š RegExpï¼Œå–®ç´”ç”¨ `parseInt()` å°±è¶³å¤ äº†ã€‚å› ç‚ºç•¶å‚³å…¥ä¸åˆæ³•çš„å­—ä¸²æ™‚ï¼Œå®ƒå°±æœƒä¸€å¾‹å›å‚³ `NaN`ï¼Œä¹Ÿä¸æœƒæ‹‹å‡ºä»»ä½•éŒ¯èª¤ã€‚[KISSï¼ˆKeep It Simple, Stupidï¼‰åŸå‰‡](https://en.wikipedia.org/wiki/KISS_principle)ä¾¿å¾ˆå¥½åœ°èªªæ˜äº†é€™å€‹é“ç†ï¼Œè¤‡é›œçš„è¨­è¨ˆå¾€å¾€å®¹æ˜“å‡ºéŒ¯ï¼Œå¢åŠ ä¸å¿…è¦çš„è¤‡é›œåº¦å’Œ debug çš„é›£åº¦ï¼Œå› æ­¤æ‡‰å‚¾å‘ä»¥ç°¡å–®å’Œç›´æ¥çš„æ–¹å¼è§£æ±ºå•é¡Œï¼Œä»¥ä¿æŒç¨‹å¼ç¢¼çš„æ¸…æ™°åº¦å’Œå¯è®€æ€§ã€‚

ç¸½çµä¸Šè¿°å¹¾é»ï¼Œä»¥ TypeScript é‡æ§‹å¾Œçš„ç¨‹å¼ç¢¼é•·å¾—åƒé€™æ¨£ï¼š

```typescript
const parseTaxiCount = (countString: string) => {
  const [min, max] = [0, 30]
  const count = parseInt(countString) || 0
  const clampedCount = Math.min(Math.max(count, min), max)
  const paddedCount = String(clampedCount).padStart(2, '0')

  return paddedCount
}
```

æœ€å¾Œä¹Ÿé™„ä¸Šå–®å…ƒæ¸¬è©¦ï¼ˆJestï¼‰ï¼š

```javascript
it('parseTaxiCount()', () => {
  expect(parseTaxiCount('')).toBe('00')
  expect(parseTaxiCount(' ')).toBe('00')
  expect(parseTaxiCount('-1')).toBe('00')
  expect(parseTaxiCount('0')).toBe('00')
  expect(parseTaxiCount('1')).toBe('01')
  expect(parseTaxiCount('01')).toBe('01')
  expect(parseTaxiCount('15')).toBe('15')
  expect(parseTaxiCount('30')).toBe('30')
  expect(parseTaxiCount('31')).toBe('30')
  expect(parseTaxiCount('999')).toBe('30')
  expect(parseTaxiCount('abc')).toBe('00')
  expect(parseTaxiCount('1a1')).toBe('01')
  expect(parseTaxiCount('30aaa')).toBe('30')
  expect(parseTaxiCount('030aaa')).toBe('30')
})
```

## çµèª

ä»¥ä¸Šåˆ†ææ˜¯åŸºæ–¼å€‹äººé–‹ç™¼ç¿’æ…£è€Œç¸½çµå‡ºçš„ä¸»è§€æ„è¦‹ï¼Œæä¾›ä¸€äº›åœ¨ Code Review æ™‚å¯ä½œç‚ºåƒè€ƒçš„è§€é»ï¼Œæœªå¿…æ˜¯æœ€ä½³è§£ã€‚ä¸åŒåœ˜éšŠä¹Ÿå¯èƒ½æœ‰å„è‡ªç¨ç‰¹çš„é¢¨æ ¼ï¼Œè¦çŸ¥é“ Code Review çš„ç›®çš„ä¸åƒ…åƒ…æ˜¯ç¢ºä¿ç¨‹å¼ç¢¼çš„å“è³ªå’Œä¸€è‡´æ€§ï¼Œæ›´æ˜¯ç‚ºäº†ä¿ƒé€²åœ˜éšŠçš„åˆä½œå’Œæºé€šï¼Œè®“é–‹ç™¼è€…äº’ç›¸å­¸ç¿’å’Œåˆ†äº«æœ€ä½³å¯¦è¸ã€æŠ€å·§å’Œç¶“é©—ï¼Œæœ€çµ‚é”æˆå…±è­˜çš„ä¸€å€‹éç¨‹ã€‚å› æ­¤åœ¨éç¨‹ä¸­åˆ‡è¨˜è¦ä¿æŒé–‹æ”¾è¨è«–çš„å¿ƒæ…‹ï¼Œæä¾›å…·é«”ä¸”å»ºè¨­æ€§çš„å»ºè­°ï¼Œè€Œä¸å–®å–®æ˜¯æŒ‘å‰”å’ŒæŒ‡è²¬ã€‚
